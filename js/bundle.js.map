{"version":3,"file":"bundle.js","mappings":"mBAIAA,OAAOC,iBAAiB,oBAAoB,MCF5C,WA2CI,SAASC,EAAYC,GACjB,MAAMC,EAAcC,SAASC,cAAc,OAE3CF,EAAYG,UAAUC,IAAI,mBAC1BJ,EAAYK,UAAY,8BAA8BN,WACtDE,SAASK,cAAc,SAASC,OAAOP,GAEvCQ,YAAW,KACPR,EAAYS,WACb,MA7CP,WACI,MAAMC,EAAOT,SAASK,cAAc,SAcpCI,EAAKb,iBAAiB,UAAWc,IAC7BA,EAAEC,iBAEF,MAAMC,EAAW,IAAIC,SAASJ,GAfjBK,OAAOC,EAAKC,KACzB,MAAMC,QAAiBC,MAkBd,sDAlByB,CAC9BC,OAAQ,OACRC,QAAS,CACL,eAAgB,oBAEpBC,KAAML,IAGV,aAAaC,EAASK,QAUtBC,CAAS,EAFIC,KAAKC,UAAUC,OAAOC,YAAYf,EAASgB,aAGnDC,MAAKb,IACFc,QAAQC,IAAIf,GACZnB,EA7BH,oCA+BAmC,OAAM,KACHnC,EA/BN,6BAgCKoC,SAAQ,KACPxB,EAAKyB,cAkBrBC,IDnDA,GEJJ,WACI,MAAMC,EACFC,YAAYC,EAAMC,KAASC,GACvBC,KAAKH,KAAOA,EACZG,KAAKF,KAAOA,EACZE,KAAKD,QAAUA,EACfC,KAAKC,OAAS1C,SAASK,cAAc,eAGzCsC,SACI,MAAMC,EAAU5C,SAASC,cAAc,MAEX,IAAxBwC,KAAKD,QAAQK,QACbJ,KAAKG,QAAU,OACfA,EAAQ1C,UAAUC,IAAIsC,KAAKG,UAE3BH,KAAKD,QAAQM,SAAQC,GAAaH,EAAQ1C,UAAUC,IAAI4C,KAG5DH,EAAQxC,UAAY,wCACKqC,KAAKH,2DACGG,KAAKF,kCAEtCE,KAAKC,OAAOpC,OAAOsC,KAI3B9B,eAAekC,EAAUjC,SACfG,MAAMH,GACPc,MAAMZ,GACIA,EAASK,SAEnBO,MAAMb,IACH,IAAIiC,EAAMzB,KAAK0B,MAAM1B,KAAKC,UAAUT,IACpCc,QAAQC,IAAIkB,GAOxB,SAAmBE,GACf,MAAM,MAACC,EAAOpC,KAAMqC,EAAU,cAAiBC,GAAeH,GASlE,SAAwBE,GACpBA,EAASP,SAAQ,EAAER,KAAAA,EAAMC,KAAAA,MACrB,IAAIH,EAAKE,EAAMC,EAAM,QAAQI,aATjCY,CAAeF,GAanB,SAA+BD,GAC3B,MAAMV,EAAS1C,SAASK,cAAc,eAChCmD,EAAWxD,SAASK,cAAc,eAClCoD,EAAMzD,SAASK,cAAc,mBACnCqC,EAAOtC,UAAY,GAEnBgD,EAAMN,SAAQY,IACV,MAAMd,EAAU5C,SAASC,cAAc,MACnCyD,EAAKC,QACLf,EAAQ1C,UAAUC,IAAI,UAG1ByC,EAAQxC,UAAY,cAAcsD,EAAKE,YACvClB,EAAOpC,OAAOsC,GAEG,OAAbc,EAAK3C,KACL6B,EAAQ1C,UAAUC,IAAI,YAG1ByC,EAAQhD,iBAAiB,SAASc,IAC9BA,EAAEC,iBACF6C,EAASpD,UAAY,GACrBsC,EAAOtC,UAAY,IACnB4C,EAAUU,EAAK3C,KACX0C,EAAIvD,UAAU2D,SAAS,SACvBJ,EAAIvD,UAAUM,OAAO,cApCjCsD,CAAsBV,GA2C1B,SAAkCE,GAC9BtD,SAASK,cAAc,mBAAmB0D,QAAU,WAChDjC,QAAQC,IAAIuB,GACRA,EACAN,EAAUM,GACY,MAAfA,GACPtD,SAASK,cAAc,mBAAmBH,UAAUC,IAAI,SA/ChE6D,CAAyBV,GAbjBW,CAAUhB,MAItBD,CAAU,uDFjCV,O","sources":["webpack://test_form/./js/script.js","webpack://test_form/./js/modules/form.js","webpack://test_form/./js/modules/posts.js"],"sourcesContent":["\"use stritc\";\r\nimport posts from \"./modules/posts\";\r\nimport form from \"./modules/form\";\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", () => {\r\n\r\n    form();\r\n    \r\n    posts();\r\n\r\n});","\"use strict\";\r\n\r\nfunction form() {\r\n\r\n    const message = {\r\n        success: \"Вы добавили новый комментарий\",\r\n        fail: \"Что-то пошло не так...\"\r\n    };\r\n\r\n    function bindPostData() {\r\n        const form = document.querySelector(\".form\");\r\n\r\n        const postData = async (url, data) => {\r\n            const response = await fetch(url, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-type\": \"application/json\"\r\n                },\r\n                body: data\r\n            });\r\n\r\n            return await response.json();\r\n        };\r\n\r\n        form.addEventListener(\"submit\", (e) => {\r\n            e.preventDefault();\r\n\r\n            const formData = new FormData(form);\r\n            \r\n            const json = JSON.stringify(Object.fromEntries(formData.entries()));\r\n\r\n            postData(\"https://jordan.ashton.fashion/api/goods/30/comments\", json)\r\n                .then(data => {\r\n                    console.log(data);\r\n                    showMessage(message.success);\r\n                })\r\n                .catch(() => {\r\n                    showMessage(message.fail);\r\n                }).finally(() => {\r\n                    form.reset();\r\n                });\r\n        });\r\n        \r\n    }\r\n\r\n    function showMessage(message) {\r\n        const sendMessage = document.createElement(\"div\");\r\n\r\n        sendMessage.classList.add(\"message-wrapper\");\r\n        sendMessage.innerHTML = `<span class=\"show-message\">${message}</span>`;\r\n        document.querySelector(\".form\").append(sendMessage);\r\n\r\n        setTimeout(() => {\r\n            sendMessage.remove();\r\n        }, 4000);\r\n    }\r\n\r\n    bindPostData();\r\n\r\n}\r\nexport default form;","\"use strict\";\r\n\r\nfunction posts() {\r\n    class Post {\r\n        constructor(name, text, ...classes) {\r\n            this.name = name;\r\n            this.text = text;\r\n            this.classes = classes;\r\n            this.parent = document.querySelector(\".posts-list\");\r\n        }\r\n\r\n        render() {\r\n            const element = document.createElement(\"li\");\r\n\r\n            if (this.classes.length === 0) {\r\n                this.element = \"post\";\r\n                element.classList.add(this.element);\r\n            } else {\r\n                this.classes.forEach(className => element.classList.add(className));\r\n            }\r\n\r\n            element.innerHTML = `\r\n                <span class=\"name\">${this.name}</span>\r\n                <span class=\"message\"><pre>${this.text}</pre></span>\r\n            `;\r\n            this.parent.append(element);\r\n        }\r\n    }\r\n\r\n    async function showPosts(url) {\r\n        await fetch(url)\r\n            .then((response) => {\r\n                return response.json();\r\n            })\r\n            .then((data) => {\r\n                let obj = JSON.parse(JSON.stringify(data));\r\n                console.log(obj);\r\n                renderAll(obj);\r\n            });\r\n    }\r\n\r\n    showPosts(\"https://jordan.ashton.fashion/api/goods/30/comments\");\r\n\r\n    function renderAll(commentsResponse) {\r\n        const {links, data: comments, \"next_page_url\": nextPageUrl} = commentsResponse;\r\n\r\n        renderComments(comments);\r\n\r\n        renderPaginationLinks(links);\r\n\r\n        addShowMoreButtonHandler(nextPageUrl);\r\n    }\r\n\r\n    function renderComments(comments) {\r\n        comments.forEach(({name, text}) => {\r\n            new Post(name, text, \"post\").render();\r\n        });\r\n    }\r\n\r\n    function renderPaginationLinks(links) {\r\n        const parent = document.querySelector(\".pagination\");\r\n        const postList = document.querySelector(\".posts-list\");\r\n        const btn = document.querySelector(\".btn-pagination\");\r\n        parent.innerHTML = \"\";\r\n\r\n        links.forEach(link => {\r\n            const element = document.createElement(\"li\");\r\n            if (link.active) {\r\n                element.classList.add(\"active\");\r\n            }\r\n\r\n            element.innerHTML = `<a href=\"\">${link.label}</a>`;\r\n            parent.append(element);\r\n\r\n            if (link.url === null) {\r\n                element.classList.add(\"disabled\");\r\n            }\r\n\r\n            element.addEventListener(\"click\", e => {\r\n                e.preventDefault();\r\n                postList.innerHTML = \"\";\r\n                parent.innerHTML = \" \";\r\n                showPosts(link.url);\r\n                if (btn.classList.contains(\"hide\")) {\r\n                    btn.classList.remove(\"hide\");\r\n                }\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n    function addShowMoreButtonHandler(nextPageUrl) {\r\n        document.querySelector(\".btn-pagination\").onclick = function () {\r\n            console.log(nextPageUrl);\r\n            if (nextPageUrl) {\r\n                showPosts(nextPageUrl);\r\n            } else if (nextPageUrl == null) {\r\n                document.querySelector(\".btn-pagination\").classList.add(\"hide\");\r\n            }\r\n            \r\n        };\r\n    }\r\n\r\n}\r\n\r\nexport default posts;"],"names":["window","addEventListener","showMessage","message","sendMessage","document","createElement","classList","add","innerHTML","querySelector","append","setTimeout","remove","form","e","preventDefault","formData","FormData","async","url","data","response","fetch","method","headers","body","json","postData","JSON","stringify","Object","fromEntries","entries","then","console","log","catch","finally","reset","bindPostData","Post","constructor","name","text","classes","this","parent","render","element","length","forEach","className","showPosts","obj","parse","commentsResponse","links","comments","nextPageUrl","renderComments","postList","btn","link","active","label","contains","renderPaginationLinks","onclick","addShowMoreButtonHandler","renderAll"],"sourceRoot":""}