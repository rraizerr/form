(()=>{"use strict";window.addEventListener("DOMContentLoaded",(()=>{(function(){function e(e){const t=document.createElement("div");t.classList.add("message-wrapper"),t.innerHTML=`<span class="show-message">${e}</span>`,document.querySelector(".form").append(t),setTimeout((()=>{t.remove()}),4e3)}!function(){const t=document.querySelector(".form");t.addEventListener("submit",(n=>{n.preventDefault();const s=new FormData(t);(async(e,t)=>{const n=await fetch("https://jordan.ashton.fashion/api/goods/30/comments",{method:"POST",headers:{"Content-type":"application/json"},body:t});return await n.json()})(0,JSON.stringify(Object.fromEntries(s.entries()))).then((t=>{console.log(t),e("Вы добавили новый комментарий")})).catch((()=>{e("Что-то пошло не так...")})).finally((()=>{t.reset()}))}))}()})(),function(){class e{constructor(e,t,...n){this.name=e,this.text=t,this.classes=n,this.parent=document.querySelector(".posts-list")}render(){const e=document.createElement("li");0===this.classes.length?(this.element="post",e.classList.add(this.element)):this.classes.forEach((t=>e.classList.add(t))),e.innerHTML=`\n                <span class="name">${this.name}</span>\n                <span class="message"><pre>${this.text}</pre></span>\n            `,this.parent.append(e)}}!async function t(n){await fetch(n).then((e=>e.json())).then((n=>{let s=JSON.parse(JSON.stringify(n));console.log(s),function(n){const{links:s,data:a,next_page_url:o}=n;(function(t){t.forEach((({name:t,text:n})=>{new e(t,n,"post").render()}))})(a),function(e){const n=document.querySelector(".pagination"),s=document.querySelector(".posts-list"),a=document.querySelector(".btn-pagination");n.innerHTML="",e.forEach((e=>{const o=document.createElement("li");e.active&&o.classList.add("active"),o.innerHTML=`<a href="">${e.label}</a>`,n.append(o),null===e.url&&o.classList.add("disabled"),o.addEventListener("click",(o=>{o.preventDefault(),s.innerHTML="",n.innerHTML=" ",t(e.url),a.classList.contains("hide")&&a.classList.remove("hide")}))}))}(s),function(e){document.querySelector(".btn-pagination").onclick=function(){console.log(e),e?t(e):null==e&&document.querySelector(".btn-pagination").classList.add("hide")}}(o)}(s)}))}("https://jordan.ashton.fashion/api/goods/30/comments")}()}))})();
//# sourceMappingURL=bundle.js.map